---
title: 一.操作系统概述
date: 2021-01-30 22:45:47
categories: 
    - 考研
---

### 操作系用概述

#### 基本概念

##### 定义

操作系统: 管理计算机软硬件资源,为上层用户、应用程序提供服务，是计算机中最基本的系统软件

#### 特征

1. 并发
   - 并发：宏观上同时执行，微观上交替执行
   - 并行：同一时刻能处理两种或两种以上的工作

2. 共享
   - 互斥共享（如摄像头）
   - 同时共享（如硬盘资源）

3. 虚拟
   - 时分复用技术（虚拟处理器技术）
   - 空分复用技术（虚拟存储技术）

4. 异步

<!--more-->

**并发与共享是最基本的两个特征，且互为存在条件，没有并发和共享就没有虚拟和异步的概念**

##### 目标和功能

1. 资源管理
   - 处理机管理：进程控制、进程同步、处理机调度、死锁处理等
   - 存储器管理：内存分配、内存保护、地址映射、共享与内存扩充等
   - 文件管理：文件存储空间管理、目录管理、文件读写管理与保护等
   - 设备管理：缓冲管理、设备分配、设备处理、虚拟设备等

2. 作为用户与硬件之间的接口为用户提供服务
   - 命令接口：1）脱机命令接口（批处理命令接口，适用于批处理系统）、2）联机命令接口
   - 程序接口：由一组系统调用（广义指令）组成
   - GUI用户图形界面

3. 对硬件机器的扩展

---

#### 操作系统发展与分类

##### 手工操作阶段（此阶段无操作系统）

- 缺点：人机速度矛盾，资源利用率低

##### 批处理阶段

1. 单道批处理系统（引入脱机输入输出技术）
   - 特点：自动性、单道性、顺序性
   - 优点：缓解了人机速度矛盾
   - 缺点：资源利用率依然很低

2. 多道批处理系统（**操作系统出现**）
   - 特点：多道、宏观上并行、微观上穿行
   - 优点：多道程序并发执行，资源利用率高
   - 缺点：不提供人机交互功能

##### 分时操作系统（采用分时技术）

- 特点：同时性（多个终端用户同时使用一台计算机）、交互性、独立性（用户间相互独立进行操作，互不干扰）、及时性（用户请求能在很短时间内获得响应）
- 优点：提供人机交互功能
- 缺点：不能优先处理紧急任务

##### 实时操作系统

1. 硬实时操作系统（必须在严格规定时间内完成操作）
2. 软实时操作系统（能偶尔违反时间规定）
  
- 优点：能优先处理紧急任务

##### 网络操作系统和分布式计算机系统

1. 网络操作系统
   - 特点：网络中各种资源的共享及各台计算机之间的通信

2. 分布式计算机系统
   - 特点：分布性和并行性

##### 个人计算机操作系统

目前使用最广泛的操作系统

---

#### 操作系统运行环境

##### 运行机制

1. 两种指令
   - 特权指令（仅能由操作系统使用的指令，只能在核心态下执行）
   - 非特权指令
2. 两种处理器状态
   - 核心态（管态）
   - 用户态（目态）
3. 两种程序
   - 内核程序（只能在核心态下执行）
   - 用户程序

##### 操作系统内核

1. 时钟管理
2. 中断管理
3. 原语
   - 1）处于操作系统的最底层，最接近硬件
   - 2）该类程序的执行具有原子性，操作只能一气呵成
   - 3）运行时间较短，调用频繁

4. 系统控制的数据结构及处理
   - 进程管理
   - 存储器管理
   - 设备管理

##### 中断与异常

1. 中断的诞生、概念与作用
   - 诞生：为了实现多道程序并发执行而引入的一种技术
   - 概念与作用：发生中断，操作系统便会介入并进行管理，**CPU即刻进入核心态(堆栈也由用户堆栈切换到系统堆栈)**，**中断是CPU从用户态进入核心态的唯一途径**
2. 中断的分类  
   - 外中断（中断）：分为外设请求、人工干预
   - 内中断（异常）：分为自愿中断（指令中断）和强迫中断（硬件故障、软件中断），也可分为陷入（trap）、故障（fault）、终止（abort）
3. 外中断的处理过程
   - ① 每条指令结束后，CPU检查是否有外部中断信号
   - ② 若有则保护被中断进程的CPU环境（程序计数器PC、程序状态字寄存器、通用数据寄存器、通用地址寄存器）
   - ③ 根据中断信号类型转入相应的中断处理程序
   - ④ 恢复原进程的cpu环境并退出中断,返回原进程继续执行

##### 系统调用(广义指令)

1. 作用
   - 操作系统提供给应用程序的接口，应用程序通过系统调用请求操作系统的服务
   - 系统调用会使处理器由用户态切换到核心态（通过访管指令发起系统调用进入内核态，对应内中断的自愿中断）
2. 分类
   - 设备管理
   - 文件管理
   - 进程控制
   - 进程通信
   - 内存管理
3. 系统调用与库函数的区别
   - 系统调用是操作系统向上提供的接口，部分库函数中内容会对系统调用的进一步封装，即使用系统调用实现某些功能
4. 系统调用的过程
   - ① 传递系统调用的参数
   - ② 执行访管指令（陷入指令）
   - ③ 执行相应的服务程序
   - ④ 返回用户程序

**访管指令（陷入指令）：由于访管指令是在用户态下使用的,故访管指令不属于特权指令**

___

#### 操作系统的体系结构

1. 大内核
   - 优点：高性能
   - 缺点：内核代码庞大，结构复杂难以维护
2. 微内核
   - 优点：内核功能少，结构清晰，添加系统服务时无需修改内核，稳定且易于维护
   - 缺点：需要频繁在用户态与核心态之间切换，性能低